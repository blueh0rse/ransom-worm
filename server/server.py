###########################################################################################################################
####################################################     LIBRARIES     ####################################################
###########################################################################################################################

# pip install Flask==2.0.1 Jinja2==3.0.1 --force-reinstall
# pip install --upgrade Flask Werkzeug
from flask import Flask, send_from_directory

###########################################################################################################################
#################################################     INITIALIZATIONS     #################################################
###########################################################################################################################

IP_ADDRESS = "10.0.2.15"
PORT = 8000
FILE_TO_SERVE = "./instructions.txt"

###########################################################################################################################
#####################################################     PROGRAM     #####################################################
###########################################################################################################################

if __name__ == '__main__':
    app = Flask(__name__)

    @app.route('/')
    def serve_file():
        try: return send_from_directory('.', FILE_TO_SERVE)
        except FileNotFoundError: return "File not found", 404

    @app.route('/reset', methods=['GET'])
    def reset_endpoint():
        with open(FILE_TO_SERVE, 'w') as file:
            file.write('# Write the instruction in the next line!\n') 
        print("\nInstructions reseted!\n")
        return "Instructions reseted!"

    if __name__ == '__main__':
        app.run(host=IP_ADDRESS, port=PORT, debug=True)